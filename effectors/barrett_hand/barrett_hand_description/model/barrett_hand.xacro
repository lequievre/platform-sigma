<?xml version="1.0"?>
<robot name="barrett_hand_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">

	<!-- gazebo and transmission models /-->
	<xacro:include filename="$(find barrett_hand_description)/model/barrett_hand.gazebo.xacro"/>
	<xacro:include filename="$(find barrett_hand_description)/model/barrett_hand.transmission.xacro"/>

	<property name="dist_joint_offset" value="0.75" />
	<property name="dist_joint_multiplier" value="0.3" />
	<property name="dist_split_offset" value="0.0" />
	<property name="dist_split_multiplier" value="1.0" />

	
	<xacro:macro name="barrett_hand" params="parent name namespace *origin">

		<link name="${name}_barrett_base_link">
			<inertial>
				<mass value="0.1" />
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1" />
			</inertial>
			<visual>
				<origin
				xyz="0 0 0"
				rpy="0 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/base_link.STL" />
				</geometry>
				<material name="">
					<color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1" />
				</material>
			</visual>
			<collision>
				<origin xyz="0 0 0" rpy="0 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/base_link.STL" />
				</geometry>
			</collision>
		</link>

		<joint name="${parent}_${name}_base_joint" type="fixed">
			<insert_block name="origin"/>
			<parent link="${parent}" />
			<child link="${name}_barrett_base_link" />
		</joint>

		<link name="${name}_finger_1_prox_link">
			<inertial>
				<mass value="0.1" />
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1" />
			</inertial>
			<visual>
				<origin
				xyz="0 0 0"
				rpy="0 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_1_prox_link.STL" />
				</geometry>
				<material name="">
					<color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1" />
				</material>
			</visual>
			<collision>
				<origin
				xyz="0 0 0"
				rpy="0 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_1_prox_link.STL" />
				</geometry>
			</collision>
		</link>

		<joint name="${name}_finger_1_prox_joint" type="revolute">
			<origin xyz="0.025 0 0.0415" rpy="0 2.7051E-17 -1.5708" />
			<parent link="${name}_barrett_base_link" />
			<child link="${name}_finger_1_prox_link" />
			<axis xyz="0 0 -1" />
			<limit lower="0.0" upper="3.141" effort="10000" velocity="0.2" />
			<dynamics damping="10.0" friction="10.0" />
		</joint>


		<link name="${name}_finger_1_med_link">
			<inertial>
				<mass value="0.1" />
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1" />
			</inertial>
			<visual>
				<origin
				xyz="0 0 0"
				rpy="3.14159265359 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_1_med_link.STL" />
				</geometry>
				<material name="">
					<color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1" />
				</material>
			</visual>
			<collision>
				<origin
				xyz="0 0 0"
				rpy="3.14159265359 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_1_med_link.STL" />
				</geometry>
			</collision>
		</link>
  

		<joint name="${name}_finger_1_med_joint" type="revolute">
			<origin xyz="-0.05 0 0.0339" rpy="-1.5708 -8.8281E-17 0" />
			<parent link="${name}_finger_1_prox_link" />
			<child link="${name}_finger_1_med_link" />
			<axis xyz="0 0 1" />
			<limit lower="0" upper="2.44" effort="10000" velocity="0.2" />
			<dynamics damping="10.0" friction="10.0" />
		</joint>


		<link name="${name}_finger_1_dist_link">
			<inertial>
				<mass value="0.001" />
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1" />
			</inertial>
			<visual>
				<origin xyz="0 0 0" rpy="3.14159265359 0 -0.73" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_1_dist_link.STL" />
				</geometry>
				<material name="">
					<color rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
				</material>
			</visual>
			<collision>
				<origin xyz="0 0 0" rpy="3.14159265359 0 -0.73" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_1_dist_link.STL" />
				</geometry>
			</collision>
		</link>


		<joint name="${name}_finger_1_dist_joint" type="revolute"> <!--original is revolute-->
			<origin xyz="-0.069936 -0.003 0" rpy="1.6787E-18 -3.6382E-15 -6.1073E-33" />
			<parent link="${name}_finger_1_med_link" />
			<child link="${name}_finger_1_dist_link" />
			<axis xyz="0 0 1" />
			<limit lower="0.6" upper="1.57" effort="10000" velocity="0.2" />
			<dynamics damping="10.0" friction="10.0" />
		</joint>


		<link name="${name}_finger_2_prox_link">
			<inertial>
				<mass value="0.1" />
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1" />
			</inertial>
			<visual>
				<origin xyz="0 0 0" rpy="0 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_2_prox_link.STL" />
				</geometry>
				<material name="">
					<color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1" />
				</material>
			</visual>
			<collision>
				<origin xyz="0 0 0" rpy="0 0 0" />
				<geometry>
				<mesh filename="package://barrett_hand_description/mesh/finger_2_prox_link.STL" />
				</geometry>
			</collision>
		</link>

		<joint name="${name}_finger_2_prox_joint" type="revolute">
			<origin xyz="-0.025 0 0.0415" rpy="0 2.7051E-17 -1.5708" />
			<parent link="${name}_barrett_base_link" />
			<child link="${name}_finger_2_prox_link" />
			<axis xyz="0 0 1" />
			<limit lower="0" upper="3.141" effort="10000"  velocity="0.2" />
			<dynamics damping="10.0" friction="10.0" />
		</joint>


		<link name="${name}_finger_2_med_link">
			<inertial>
				<mass value="0.1" />
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1" />
			</inertial>
			<visual>
				<origin
				xyz="0 0 0"
				rpy="3.14159265359 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_2_med_link.STL" />
				</geometry>
				<material name="">
					<color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1" />
				</material>
			</visual>
			<collision>
				<origin
				xyz="0 0 0"
				rpy="3.14159265359 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_2_med_link.STL" />
				</geometry>
			</collision>
		</link>

		<joint name="${name}_finger_2_med_joint" type="revolute">
			<origin xyz="-0.05 0 0.0339" rpy="-1.5708 -8.8281E-17 0" />
			<parent link="${name}_finger_2_prox_link" />
			<child link="${name}_finger_2_med_link" />
			<axis xyz="0 0 1" />
			<limit lower="0.0" upper="2.44" effort="10000" velocity="0.2" />
			<dynamics damping="10.0" friction="10.0" />
		</joint>


		<link name="${name}_finger_2_dist_link">
			<inertial>
				<mass value="0.001" />
				<origin xyz="0 0 0" rpy="0 0 0"/>
				<inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1" />
			</inertial>
			<visual>
				<origin xyz="0 0 0" rpy="3.14159265359 0 -0.73" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_2_dist_link.STL" />
				</geometry>
				<material name="">
					<color rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
				</material>
			</visual>
			<collision>
				<origin
				xyz="0 0 0"
				rpy="3.14159265359 0 -0.73" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_2_dist_link.STL" />
				</geometry>
			</collision>
		</link>

		<joint name="${name}_finger_2_dist_joint" type="revolute"> <!--original is revolute-->
			<origin
			xyz="-0.069917 -0.0034087 0"
			rpy="-3.1382E-17 -2.3229E-16 0" />
			<parent link="${name}_finger_2_med_link" />
			<child link="${name}_finger_2_dist_link" />
			<axis xyz="0 0 1" />
			<limit lower="0.6" upper="1.57" effort="10000" velocity="0.2" />
			<dynamics damping="10.0" friction="10.0" />
		</joint>


		<link name="${name}_finger_3_med_link">
			<inertial>
				<mass value="0.1" />
				<origin xyz="-0.05 0 0" rpy="0 0 0"/>
				<inertia ixx="1.0" ixy="0" ixz="0" iyy="1.0" iyz="0" izz="1.0" />
			</inertial>
			<visual>
				<origin
				xyz="0 0 0"
				rpy="3.14159265359 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_3_med_link.STL" />
				</geometry>
				<material name="">
					<color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1" />
				</material>
			</visual>
			<collision>
				<origin
				xyz="0 0 0"
				rpy="3.14159265359 0 0" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_3_med_link.STL" />
				</geometry>
			</collision>
		</link>

		<joint name="${name}_finger_3_med_joint" type="revolute">
			<origin
			xyz="0 -0.05 0.0754"
			rpy="-1.5708 6.123E-17 1.5708" />
			<parent link="${name}_barrett_base_link" />
			<child link="${name}_finger_3_med_link" />
			<axis xyz="0 0 1" />
			<limit lower="0.0" upper="2.44" effort="10000" velocity="0.2" />
			<dynamics damping="10.0" friction="10.0" />
		</joint>

		<link name="${name}_finger_3_dist_link">
			<inertial>
				<mass value="0.1" />
				<origin xyz="-0.04 0 0" rpy="0 0 0"/>
				<inertia ixx="1.0" ixy="0" ixz="0" iyy="1.0" iyz="0" izz="1.0" />
			</inertial>
			<visual>
				<origin
				xyz="0 0 0"
				rpy="3.14159265359 0 -0.73" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_3_dist_link.STL" />
				</geometry>
				<material name="">
					<color rgba="0.898039215686275 0.917647058823529 0.929411764705882 1" />
				</material>
			</visual>
			<collision>
				<origin
				xyz="0 0 0"
				rpy="3.14159265359 0 -0.73" />
				<geometry>
					<mesh filename="package://barrett_hand_description/mesh/finger_3_dist_link.STL" />
				</geometry>
			</collision>
		</link>

		<joint name="${name}_finger_3_dist_joint" type="revolute">
			<origin
			xyz="-0.069936 -0.003 0"
			rpy="6.0427E-17 -6.7283E-18 -4.0657E-34" />
			<parent link="${name}_finger_3_med_link" />
			<child link="${name}_finger_3_dist_link" />
			<axis xyz="0 0 1" />
			<limit lower="0.6" upper="1.57" effort="10000" velocity="0.2" />
			<dynamics damping="10.0" friction="10.0" />
		</joint>

		<xacro:barrett_hand_gazebo name="${name}" namespace="${namespace}"/>
		<xacro:barrett_hand_transmission name="${name}"/>

	</xacro:macro>

</robot>
